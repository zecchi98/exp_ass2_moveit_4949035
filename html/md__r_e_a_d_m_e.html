<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: exp_ass2_moveit_4949035</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">exp_ass2_moveit_4949035 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
How to build the project</h1>
<p>1) Installa i seguenti pacchetti: </p><pre class="fragment">git clone https://github.com/zecchi98/rt2_ass1_ros1.git
git clone https://github.com/zecchi98/exp_ass2_moveit_4949035.git
</pre><p>2) Esegui catkin_make</p>
<p>3) Se qualche pacchetto moveit Ã¨ mancante procedi come segue: sudo apt update sudo apt install ros-noetic-moveit</p>
<h1><a class="anchor" id="autotoc_md2"></a>
How to run the project</h1>
<p>In the first window launch : roslaunch exp_ass2_moveit_4949035 my_launch_first.launch</p>
<p>In the second window launch : roslaunch exp_ass2_moveit_4949035 my_launch_second.launch</p>
<h1><a class="anchor" id="autotoc_md3"></a>
What the first launcher will execute?</h1>
<p>1) All the packages reguarding moveit 2) Everithing that will prepare pddl and rosplan to work 3) simulation_node node, which has been developed by the professor. 4) goToPoint node, which belongs to rt2_ass1_ros1 assigment. A package we developed for research track 2 the last year 5) robot_control node, which will handle the arm movements</p>
<h1><a class="anchor" id="autotoc_md4"></a>
What the second launcher will execute?</h1>
<p>1)id_handler node, which will handle and save all the ids found. 2)state_machine node, which will correctly handle all the pddls files</p>
<h1><a class="anchor" id="autotoc_md5"></a>
How this project works?</h1>
<p>This section is the most important one, here i will explain how every node interact which each other. The state machine is mainly handled by rosplan, the state_machine node is used only to inizialize them. Indeed when the project is launched this node the problems.pddl by setting the actual position of the robot and as goal hps_checked which will force the robot to go to all the hint and to collect them. Once this rosplan request is executed, the robot will start moving to the first position, this will be executed by the pddl_action "goto_waypoint" which will ask to rt2_ass1_ros1 package to handle the movement. When the position is reached the pddl_action terminate and the "take_hint" pddl_action is executed. This one will call robot_control and ask him to handle the movement, in particular it will try to move up and down the robot arm in order to try to reach the hint. After this step it will be executed "check_hp" pddl_action, which will call id_handler to know if there is a complete hypothesis. In case there is a complete hypothesis(which means that we need to check if it is the winner one) rosplan get interrupt and the plan deleted. When all the places have been visited "check_hps" becomes true and the state_machine will ask for another round until there is a complete hypothesis. As already said, if a complete hypothesis is found the plan get deleted and the state_machine will know of this thanks to "hint_to_be_tested" rosparam. In this step the state_machine will modify the problem.pddl to force the robot to "test_hp", it will then go to the center of the map and will call "/oracle_solution" service to know if the hp found is the winner one. If it is not the winner id, then the state_machine will ask to continue finding ids.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Topic explanation</h1>
<p>The following topics are created by me: 1) hint_to_be_tested, rosparam used to understand if there is a complete hint to be tested. It is used from the state_machine and from my_action.</p>
<p>2) you_win, rosparam used to understand if the match is over. It is used by my_action and the state_machine</p>
<p>3) id_to_be_tested, rosparam used to understand which is the id to be tested. It is used from my_action and the id_handler</p>
<p>4) robot_at, rosparam used to understand which is the robot actual position. It is used from the state_machine and my_action</p>
<p>5) oracle_solution, service used to know which is the id of the solution. my_action has a client of that topic</p>
<p>6) move_arm, service used to request a movement of the arm. It is used from my_action to ask to robot_control to move the arm to a specific position. In particular my_action will comunicate the position of the robot and robot_control will use this information to elaborate the best position for the arm</p>
<p>7) hints_received_and_complete, service used by my_action to request the list of all completed hints to the id_handler.</p>
<p>8) go_to_point_action, topic used for an action comunication. my_action will request to goToPoint to move the robot in a particular position of the map</p>
<p>9) oracle_hint, id_handler subscribes to this topic to know which ids are published.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
PDDL DOMAIN</h1>
<p>Here i will explain which is the main structure of the pddl domain. For more information the domain.pddl has been commented.</p>
<p>The robot can move freely into the map.</p>
<p>If the robot is in a waypoint than it can freely take the hint.</p>
<p>If the robot is in a waypoint and the hint has been taken, then hp_check can be performed. This will be used in order to check if there is a complete id. If that is the case, it will stop the plan and after it will be requested to perform a test.</p>
<p>In order to know which is the home position i have created the (is_home ?wp - waypoint) predicate</p>
<p>if the robot is in the home position and all the hps are checked then a test can be performed</p>
<p>hps_checked will become true if and only if all the hp have been checked</p>
<p>hps_tested will become true if a test has been performed</p>
<h1><a class="anchor" id="autotoc_md8"></a>
PDDL PROBLEM</h1>
<p>The pddl problem will be generated from code, in particular from the <a class="el" href="state__machine_8py.html" title="This node is used as a state machine. In particular it will control the pddl interface by planning an...">state_machine.py</a> file. Two main problem will be handled.</p>
<p>For both of the problem: All the waypoint are initialized and wp0 is distinguished as the home waypoint through the appropriate predicate. At wp0 hp are consider as checked. Every single time the problem is generated robot_at predicate will be set with the right position of the robot.</p>
<p>Here below the two types:</p>
<p>1) The first type of problem is used to move the robot around and collect hints, in particular the goal will be to get hps_checked TRUE. After that, the plan will terminate and the state machine will decide if another round is necessary or if it is necessary to do a test.</p>
<p>2)The second type of problem is used to perform a test. The goal will be to have hps_tested==TRUE, in order to complete this goal the robot will need to go to the home position and perform a test. After that, the plan will terminate and the state machine will decide if another round is necessary or if it is the end of the game. hps_checked is initialized as TRUE.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Documentation</h1>
<p>if you want to know more about every single script, you can read the doxygen documentation, which can be found in the html folder </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
